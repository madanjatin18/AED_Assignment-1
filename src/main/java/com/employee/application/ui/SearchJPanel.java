/*
 * Click nbfs://nbhost/SystemFileSystem/Templates/Licenses/license-default.txt to change this license
 * Click nbfs://nbhost/SystemFileSystem/Templates/GUIForms/JPanel.java to edit this template
 */
package com.employee.application.ui;

import com.employee.application.EmployeeHistory;
import com.employee.application.EmployeeInfo;
import java.awt.Image;
import java.awt.List;
import java.util.ArrayList;
import javax.swing.ButtonGroup;
import javax.swing.ImageIcon;
import javax.swing.JOptionPane;
import javax.swing.table.DefaultTableModel;

/**
 *
 * @author madan
 */
public class SearchJPanel extends javax.swing.JPanel {

    /**
     * Creates new form SearchJPanel
     */
    EmployeeHistory employeeHistory;
    EmployeeInfo employeeupdate;
    String selectedImagePath;
    
    ButtonGroup group = new ButtonGroup();
    ArrayList<EmployeeInfo> searchedEmployee;
    ArrayList<String> employeeData;
    public SearchJPanel(EmployeeHistory employeeHistory) {
        initComponents();
        this.employeeHistory = employeeHistory;
        lblImageIcon2.setText("");
        lblImageIcon2.setVisible(false);
        tblViewTable1.setVisible(false);
        btnView1.setVisible(false);
        
        
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        jScrollPane1 = new javax.swing.JScrollPane();
        tblViewTable1 = new javax.swing.JTable();
        btnView1 = new javax.swing.JButton();
        lblGender = new javax.swing.JLabel();
        lblName = new javax.swing.JLabel();
        lblTeamInfo = new javax.swing.JLabel();
        txtStartDate2 = new javax.swing.JTextField();
        lblAge = new javax.swing.JLabel();
        lblContactNum = new javax.swing.JLabel();
        lblPosition = new javax.swing.JLabel();
        txtContactNum2 = new javax.swing.JTextField();
        lblLevel = new javax.swing.JLabel();
        lblStartDate = new javax.swing.JLabel();
        txtTeamInfo2 = new javax.swing.JTextField();
        lblMailId = new javax.swing.JLabel();
        txtGender2 = new javax.swing.JTextField();
        txtMailId2 = new javax.swing.JTextField();
        txtEmpId2 = new javax.swing.JTextField();
        txtName2 = new javax.swing.JTextField();
        txtAge2 = new javax.swing.JTextField();
        txtLevel2 = new javax.swing.JTextField();
        lblEmpId = new javax.swing.JLabel();
        txtPosition2 = new javax.swing.JTextField();
        lblImageIcon2 = new javax.swing.JLabel();
        txtSearchField1 = new javax.swing.JTextField();
        btnSearch1 = new javax.swing.JButton();
        jLabel1 = new javax.swing.JLabel();

        setBackground(new java.awt.Color(153, 153, 153));
        setMaximumSize(new java.awt.Dimension(600, 600));
        setMinimumSize(new java.awt.Dimension(600, 600));
        setPreferredSize(new java.awt.Dimension(600, 600));
        setLayout(new org.netbeans.lib.awtextra.AbsoluteLayout());

        tblViewTable1.setBackground(new java.awt.Color(204, 204, 204));
        tblViewTable1.setBorder(new javax.swing.border.LineBorder(new java.awt.Color(0, 0, 0), 1, true));
        tblViewTable1.setModel(new javax.swing.table.DefaultTableModel(
            new Object [][] {
                {null, null, null},
                {null, null, null},
                {null, null, null},
                {null, null, null},
                {null, null, null},
                {null, null, null},
                {null, null, null},
                {null, null, null},
                {null, null, null},
                {null, null, null},
                {null, null, null},
                {null, null, null},
                {null, null, null},
                {null, null, null},
                {null, null, null},
                {null, null, null},
                {null, null, null},
                {null, null, null},
                {null, null, null},
                {null, null, null},
                {null, null, null},
                {null, null, null},
                {null, null, null},
                {null, null, null},
                {null, null, null},
                {null, null, null},
                {null, null, null},
                {null, null, null},
                {null, null, null},
                {null, null, null}
            },
            new String [] {
                "Employee ID", "Name", "Start Date"
            }
        ) {
            Class[] types = new Class [] {
                java.lang.String.class, java.lang.String.class, java.lang.String.class
            };
            boolean[] canEdit = new boolean [] {
                false, false, false
            };

            public Class getColumnClass(int columnIndex) {
                return types [columnIndex];
            }

            public boolean isCellEditable(int rowIndex, int columnIndex) {
                return canEdit [columnIndex];
            }
        });
        jScrollPane1.setViewportView(tblViewTable1);

        add(jScrollPane1, new org.netbeans.lib.awtextra.AbsoluteConstraints(30, 100, 560, 100));

        btnView1.setFont(new java.awt.Font("Segoe UI", 1, 12)); // NOI18N
        btnView1.setText("VIEW");
        btnView1.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnView1ActionPerformed(evt);
            }
        });
        add(btnView1, new org.netbeans.lib.awtextra.AbsoluteConstraints(500, 210, -1, -1));

        lblGender.setFont(new java.awt.Font("Segoe UI Semibold", 1, 12)); // NOI18N
        lblGender.setText("Gender:");
        add(lblGender, new org.netbeans.lib.awtextra.AbsoluteConstraints(60, 340, -1, -1));

        lblName.setFont(new java.awt.Font("Segoe UI Semibold", 1, 12)); // NOI18N
        lblName.setText("Name:");
        add(lblName, new org.netbeans.lib.awtextra.AbsoluteConstraints(60, 260, -1, -1));

        lblTeamInfo.setFont(new java.awt.Font("Segoe UI Semibold", 1, 12)); // NOI18N
        lblTeamInfo.setText("Team Information:");
        add(lblTeamInfo, new org.netbeans.lib.awtextra.AbsoluteConstraints(60, 380, -1, 20));

        txtStartDate2.setEditable(false);
        add(txtStartDate2, new org.netbeans.lib.awtextra.AbsoluteConstraints(220, 540, 194, -1));

        lblAge.setFont(new java.awt.Font("Segoe UI Semibold", 1, 12)); // NOI18N
        lblAge.setText("Age: ");
        add(lblAge, new org.netbeans.lib.awtextra.AbsoluteConstraints(60, 300, -1, -1));

        lblContactNum.setFont(new java.awt.Font("Segoe UI Semibold", 1, 12)); // NOI18N
        lblContactNum.setText("Contact Number:");
        add(lblContactNum, new org.netbeans.lib.awtextra.AbsoluteConstraints(60, 540, -1, -1));

        lblPosition.setFont(new java.awt.Font("Segoe UI Semibold", 1, 12)); // NOI18N
        lblPosition.setText("Position:");
        add(lblPosition, new org.netbeans.lib.awtextra.AbsoluteConstraints(60, 420, -1, -1));

        txtContactNum2.setEditable(false);
        txtContactNum2.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                txtContactNum2ActionPerformed(evt);
            }
        });
        add(txtContactNum2, new org.netbeans.lib.awtextra.AbsoluteConstraints(220, 580, 194, -1));

        lblLevel.setFont(new java.awt.Font("Segoe UI Semibold", 1, 12)); // NOI18N
        lblLevel.setText("Level:");
        add(lblLevel, new org.netbeans.lib.awtextra.AbsoluteConstraints(60, 460, -1, -1));

        lblStartDate.setFont(new java.awt.Font("Segoe UI Semibold", 1, 12)); // NOI18N
        lblStartDate.setText("Start Date:");
        add(lblStartDate, new org.netbeans.lib.awtextra.AbsoluteConstraints(60, 500, -1, -1));

        txtTeamInfo2.setEditable(false);
        add(txtTeamInfo2, new org.netbeans.lib.awtextra.AbsoluteConstraints(220, 420, 194, -1));

        lblMailId.setFont(new java.awt.Font("Segoe UI Semibold", 1, 12)); // NOI18N
        lblMailId.setText("Mail ID:");
        add(lblMailId, new org.netbeans.lib.awtextra.AbsoluteConstraints(60, 580, -1, -1));

        txtGender2.setEditable(false);
        txtGender2.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                txtGender2ActionPerformed(evt);
            }
        });
        add(txtGender2, new org.netbeans.lib.awtextra.AbsoluteConstraints(220, 380, 194, -1));

        txtMailId2.setEditable(false);
        txtMailId2.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                txtMailId2ActionPerformed(evt);
            }
        });
        add(txtMailId2, new org.netbeans.lib.awtextra.AbsoluteConstraints(220, 260, 194, -1));

        txtEmpId2.setEditable(false);
        add(txtEmpId2, new org.netbeans.lib.awtextra.AbsoluteConstraints(220, 220, 194, -1));

        txtName2.setEditable(false);
        add(txtName2, new org.netbeans.lib.awtextra.AbsoluteConstraints(220, 300, 194, -1));

        txtAge2.setEditable(false);
        txtAge2.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                txtAge2ActionPerformed(evt);
            }
        });
        add(txtAge2, new org.netbeans.lib.awtextra.AbsoluteConstraints(220, 340, 194, -1));

        txtLevel2.setEditable(false);
        txtLevel2.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                txtLevel2ActionPerformed(evt);
            }
        });
        add(txtLevel2, new org.netbeans.lib.awtextra.AbsoluteConstraints(220, 500, 194, 20));

        lblEmpId.setFont(new java.awt.Font("Segoe UI Semibold", 1, 12)); // NOI18N
        lblEmpId.setText("Employee ID:");
        add(lblEmpId, new org.netbeans.lib.awtextra.AbsoluteConstraints(60, 220, -1, -1));

        txtPosition2.setEditable(false);
        txtPosition2.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                txtPosition2ActionPerformed(evt);
            }
        });
        add(txtPosition2, new org.netbeans.lib.awtextra.AbsoluteConstraints(220, 460, 194, -1));

        lblImageIcon2.setBorder(javax.swing.BorderFactory.createLineBorder(new java.awt.Color(0, 0, 0)));
        add(lblImageIcon2, new org.netbeans.lib.awtextra.AbsoluteConstraints(460, 260, 100, 100));

        txtSearchField1.setText("Search by Name/EmpID");
        txtSearchField1.addFocusListener(new java.awt.event.FocusAdapter() {
            public void focusGained(java.awt.event.FocusEvent evt) {
                txtSearchField1FocusGained(evt);
            }
        });
        txtSearchField1.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                txtSearchField1ActionPerformed(evt);
            }
        });
        add(txtSearchField1, new org.netbeans.lib.awtextra.AbsoluteConstraints(210, 70, 150, -1));

        btnSearch1.setText("Search");
        btnSearch1.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnSearch1ActionPerformed(evt);
            }
        });
        add(btnSearch1, new org.netbeans.lib.awtextra.AbsoluteConstraints(380, 70, -1, -1));

        jLabel1.setFont(new java.awt.Font("Times New Roman", 1, 20)); // NOI18N
        jLabel1.setText("SEARCH EMPLOYEE PROFILE");
        add(jLabel1, new org.netbeans.lib.awtextra.AbsoluteConstraints(190, 30, -1, -1));
    }// </editor-fold>//GEN-END:initComponents

    
    private void btnView1ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnView1ActionPerformed
        // TODO add your handling code here:
        lblImageIcon2.setVisible(true);

        int selectedRowIndex = tblViewTable1.getSelectedRow();
        if (selectedRowIndex<0)
        {
            JOptionPane.showMessageDialog(this,"No Record selected to view");
            return;
        }

        DefaultTableModel model = (DefaultTableModel) tblViewTable1.getModel();
        int selectedEmployeeId =  (int) model.getValueAt(selectedRowIndex , 0);

        ArrayList<EmployeeInfo> listEmployee = employeeHistory.getHistory();
        for (EmployeeInfo individualEmployee : listEmployee) {
            if(selectedEmployeeId == individualEmployee.getEmpId()){
                txtName2.setText(individualEmployee.getName());
                txtEmpId2.setText(String.valueOf(individualEmployee.getEmpId()));
                txtAge2.setText(String.valueOf(individualEmployee.getAge()));
                txtGender2.setText(individualEmployee.getGender());
                txtStartDate2.setText(String.valueOf(individualEmployee.getStartDate()));
                txtLevel2.setText(individualEmployee.getLevel());
                txtTeamInfo2.setText(individualEmployee.getTeamInfo());
                txtPosition2.setText(individualEmployee.getPosTitle());
                txtContactNum2.setText(String.valueOf(individualEmployee.getContact()));
                txtMailId2.setText(individualEmployee.getMailId());

                ImageIcon ii = new ImageIcon(individualEmployee.getProfilePicture());
                selectedImagePath = individualEmployee.getProfilePicture();
                //Resize image
                Image image = ii.getImage().getScaledInstance(100,100, Image.SCALE_SMOOTH);
                lblImageIcon2.setIcon(new ImageIcon(image));
            }
        }

    }//GEN-LAST:event_btnView1ActionPerformed

    private void txtContactNum2ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_txtContactNum2ActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_txtContactNum2ActionPerformed

    private void txtGender2ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_txtGender2ActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_txtGender2ActionPerformed

    private void txtMailId2ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_txtMailId2ActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_txtMailId2ActionPerformed

    private void txtAge2ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_txtAge2ActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_txtAge2ActionPerformed

    private void txtLevel2ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_txtLevel2ActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_txtLevel2ActionPerformed

    private void txtPosition2ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_txtPosition2ActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_txtPosition2ActionPerformed

    private void txtSearchField1FocusGained(java.awt.event.FocusEvent evt) {//GEN-FIRST:event_txtSearchField1FocusGained
        // TODO add your handling code here:
        txtSearchField1.setText("");
    }//GEN-LAST:event_txtSearchField1FocusGained

    private void txtSearchField1ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_txtSearchField1ActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_txtSearchField1ActionPerformed
     public void viewRefresh(){
        txtName2.setText("");
        txtEmpId2.setText("");
        txtAge2.setText("");
        txtGender2.setText("");
        txtStartDate2.setText("");
        txtLevel2.setText("");
        txtTeamInfo2.setText("");
        txtPosition2.setText("");
        txtContactNum2.setText("");
        txtMailId2.setText("");
        lblImageIcon2.setVisible(false);
        lblImageIcon2.setIcon(null);
    }
    public void checkUniqueRecord(){
        searchedEmployee = new ArrayList<EmployeeInfo>();
        String searchData = txtSearchField1.getText();
        int count = 0;
        ArrayList<EmployeeInfo> listEmployee = employeeHistory.getHistory();
        for (EmployeeInfo selectedemployeeInfo : listEmployee) { 
                if(selectedemployeeInfo.getName().equals(searchData) ||
                        String.valueOf(selectedemployeeInfo.getEmpId()).equals(searchData)){
                        count+=1;
                        searchedEmployee.add(selectedemployeeInfo);
                }
            }

        if (count>1){
            tblViewTable1.setVisible(true);
            btnView1.setVisible(true);
            DefaultTableModel model = (DefaultTableModel) tblViewTable1.getModel();
            model.setRowCount(0);
        

            for (EmployeeInfo employeeInfo  : searchedEmployee) {
                Object [] row = new Object[3];
                row[0] = employeeInfo.getEmpId();
                row[1] = employeeInfo.getName();
                row[2] = employeeInfo.getStartDate();

                model.addRow(row);
            }
            
        }

    }
               
    private void btnSearch1ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnSearch1ActionPerformed
        // TODO add your handling code here:
            viewRefresh();
            checkUniqueRecord();
            
            lblImageIcon2.setVisible(true);
            int empID = Integer.parseInt(txtSearchField1.getText());
            //lblImageIcon.setVisible(true);
            Boolean notFound = true;
            ArrayList<EmployeeInfo> listEmployee = employeeHistory.getHistory();
            System.out.print(listEmployee);
            for (EmployeeInfo selectedemployeeInfo : listEmployee) {
                if(String.valueOf(empID).equals(String.valueOf(selectedemployeeInfo.getEmpId()))){
                    notFound = false;
                    employeeupdate = selectedemployeeInfo;
                    txtName2.setText(selectedemployeeInfo.getName());
                    txtEmpId2.setText(String.valueOf(selectedemployeeInfo.getEmpId()));
                    txtAge2.setText(String.valueOf(selectedemployeeInfo.getAge()));
                    txtGender2.setText(selectedemployeeInfo.getGender());
                    txtStartDate2.setText(String.valueOf(selectedemployeeInfo.getStartDate()));
                    txtLevel2.setText(selectedemployeeInfo.getLevel());
                    txtTeamInfo2.setText(selectedemployeeInfo.getTeamInfo());
                    txtPosition2.setText(selectedemployeeInfo.getPosTitle());
                    txtContactNum2.setText(String.valueOf(selectedemployeeInfo.getContact()));
                    txtMailId2.setText(selectedemployeeInfo.getMailId());

                    ImageIcon ii = new ImageIcon(selectedemployeeInfo.getProfilePicture());
                    selectedImagePath = selectedemployeeInfo.getProfilePicture();
                    //Resize image
                    Image image = ii.getImage().getScaledInstance(100,100, Image.SCALE_SMOOTH);
                    lblImageIcon2.setIcon(new ImageIcon(image));

                }
            }
            if (notFound){
                JOptionPane.showMessageDialog(this,"No Record found");
            } 
            

    }//GEN-LAST:event_btnSearch1ActionPerformed


    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JButton btnSearch1;
    private javax.swing.JButton btnView1;
    private javax.swing.JLabel jLabel1;
    private javax.swing.JScrollPane jScrollPane1;
    private javax.swing.JLabel lblAge;
    private javax.swing.JLabel lblContactNum;
    private javax.swing.JLabel lblEmpId;
    private javax.swing.JLabel lblGender;
    private javax.swing.JLabel lblImageIcon2;
    private javax.swing.JLabel lblLevel;
    private javax.swing.JLabel lblMailId;
    private javax.swing.JLabel lblName;
    private javax.swing.JLabel lblPosition;
    private javax.swing.JLabel lblStartDate;
    private javax.swing.JLabel lblTeamInfo;
    private javax.swing.JTable tblViewTable1;
    private javax.swing.JTextField txtAge2;
    private javax.swing.JTextField txtContactNum2;
    private javax.swing.JTextField txtEmpId2;
    private javax.swing.JTextField txtGender2;
    private javax.swing.JTextField txtLevel2;
    private javax.swing.JTextField txtMailId2;
    private javax.swing.JTextField txtName2;
    private javax.swing.JTextField txtPosition2;
    private javax.swing.JTextField txtSearchField1;
    private javax.swing.JTextField txtStartDate2;
    private javax.swing.JTextField txtTeamInfo2;
    // End of variables declaration//GEN-END:variables
}
